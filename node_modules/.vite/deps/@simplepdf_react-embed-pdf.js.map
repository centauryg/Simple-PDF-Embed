{
  "version": 3,
  "sources": ["../../@simplepdf/react-embed-pdf/src/index.tsx", "dep:@simplepdf_react-embed-pdf"],
  "sourcesContent": ["import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport \"./styles.scss\";\n\nexport type EmbedEvent =\n  | { type: \"DOCUMENT_LOADED\"; data: { document_id: string } }\n  | { type: \"SUBMISSION_SENT\"; data: { submission_id: string } };\n\ninterface Props {\n  children: React.ReactElement;\n  companyIdentifier?: string;\n  context?: Record<string, unknown>;\n  onEmbedEvent?: (event: EmbedEvent) => Promise<void> | void;\n}\n\nconst CloseIcon: React.FC = () => (\n  <svg\n    height=\"512\"\n    viewBox=\"0 0 512 512\"\n    width=\"512\"\n    xmlSpace=\"preserve\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M443.6 387.1 312.4 255.4l131.5-130c5.4-5.4 5.4-14.2 0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L256 197.8 124.9 68.3c-2.6-2.6-6.1-4-9.8-4-3.7 0-7.2 1.5-9.8 4L68 105.9c-5.4 5.4-5.4 14.2 0 19.6l131.5 130L68.4 387.1c-2.6 2.6-4.1 6.1-4.1 9.8 0 3.7 1.4 7.2 4.1 9.8l37.4 37.6c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1L256 313.1l130.7 131.1c2.7 2.7 6.2 4.1 9.8 4.1 3.5 0 7.1-1.3 9.8-4.1l37.4-37.6c2.6-2.6 4.1-6.1 4.1-9.8-.1-3.6-1.6-7.1-4.2-9.7z\" />\n  </svg>\n);\n\nexport const EmbedPDF: React.FC<Props> = ({\n  children,\n  companyIdentifier,\n  context,\n  onEmbedEvent,\n}) => {\n  const editorDomain = React.useMemo(\n    () => `https://${companyIdentifier ?? \"embed\"}.simplepdf.eu`,\n    [companyIdentifier]\n  );\n\n  const [shouldDisplayModal, setShouldDisplayModal] = React.useState(false);\n\n  React.useEffect(() => {\n    if (onEmbedEvent === undefined) {\n      return;\n    }\n\n    const eventHandler = async (event: MessageEvent<string>) => {\n      if (event.origin !== editorDomain) {\n        return;\n      }\n\n      const payload: EmbedEvent | null = (() => {\n        try {\n          return JSON.parse(event.data);\n        } catch (e) {\n          console.error(\"Failed to parse iFrame event payload\");\n          return null;\n        }\n      })();\n\n      switch (payload?.type) {\n        case \"DOCUMENT_LOADED\":\n        case \"SUBMISSION_SENT\":\n          await onEmbedEvent(payload);\n          return;\n\n        default:\n          return;\n      }\n    };\n\n    if (!shouldDisplayModal) {\n      window.removeEventListener(\"message\", eventHandler);\n      return;\n    }\n\n    window.addEventListener(\"message\", eventHandler, false);\n\n    return () => window.removeEventListener(\"message\", eventHandler);\n  }, [shouldDisplayModal, editorDomain, onEmbedEvent]);\n\n  const handleAnchorClick = React.useCallback((e: Event) => {\n    e.preventDefault();\n    setShouldDisplayModal(true);\n  }, []);\n\n  const handleCloseModal = React.useCallback(() => {\n    setShouldDisplayModal(false);\n  }, []);\n\n  const simplePDFUrl = React.useMemo(() => {\n    const baseURL = `${editorDomain}/editor`;\n\n    const encodedContext = (() => {\n      if (!context) {\n        return null;\n      }\n\n      try {\n        return encodeURIComponent(btoa(JSON.stringify(context)));\n      } catch (e) {\n        console.error(`Failed to encode the context: ${JSON.stringify(e)}`, {\n          context,\n        });\n        return null;\n      }\n    })();\n\n    if (!children.props.href) {\n      return `${baseURL}${encodedContext ? `?context=${encodedContext}` : \"\"}`;\n    }\n\n    const sanitizedOpenURL = encodeURIComponent(children.props.href);\n\n    return `${baseURL}?open=${sanitizedOpenURL}${\n      encodedContext ? `&context=${encodedContext}` : \"\"\n    }`;\n  }, [editorDomain, children.props.href, context]);\n\n  return (\n    <>\n      {shouldDisplayModal &&\n        createPortal(\n          <div className=\"simplePDF_container\" aria-modal=\"true\">\n            <div className=\"simplePDF_content\">\n              <button\n                onClick={handleCloseModal}\n                className=\"simplePDF_close\"\n                aria-label=\"Close PDF editor modal\"\n              >\n                <CloseIcon />\n              </button>\n              <div className=\"simplePDF_iframeContainer\">\n                <iframe\n                  referrerPolicy=\"no-referrer-when-downgrade\"\n                  className=\"simplePDF_iframe\"\n                  src={simplePDFUrl}\n                />\n              </div>\n            </div>\n          </div>,\n          document.body\n        )}\n\n      {React.cloneElement(children, { onClick: handleAnchorClick })}\n    </>\n  );\n};\n", "export default require(\"./node_modules/@simplepdf/react-embed-pdf/dist/index.js\");"],
  "mappings": "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",
  "names": ["React", "_a", "_b", "createPortal"]
}
